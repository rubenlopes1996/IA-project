package snake.snakeRandom;

import snake.*;

import java.awt.*;
import java.util.Random;

public class SnakeRandomAgent extends SnakeAgent {
    public SnakeRandomAgent(Cell cell) {
        super(cell, Color.BLUE);
    }

    @Override //o Action que ele devolve é uma direção random
    protected Action decide(Perception perception) {
        Action action = null;

        Cell w = perception.getW();
        Cell n = perception.getN();
        Cell e = perception.getE();
        Cell s = perception.getS();

        if (w != null) {
            if (w.hasFood()) {
                w.setFood(null);
                snakeBody.add(0, new Tail(cell));
                return Action.WEST;
            }
        }

        if (n != null) {
            if (n.hasFood()) {
                n.setFood(null);
                snakeBody.add(0, new Tail(cell));
                return Action.NORTH;
            }
        }

        if (e != null) {
            if (e.hasFood()) {
                e.setFood(null);
                snakeBody.add(0, new Tail(cell));
                return Action.EAST;
            }
        }

        if (s != null) {
            if (s.hasFood()) {
                s.setFood(null);
                snakeBody.add(0, new Tail(cell));
                return Action.SOUTH;
            }
        }

        moverCauda(this.getCell());

        int movement = Environment.random.nextInt(4);

        if (movement == 0) {
            if (w != null && !w.hasTail() && !w.hasAgent() && !w.hasWall()) {
                action = Action.WEST;
            }else if(n != null && !n.hasTail() && !n.hasAgent() && !n.hasWall()){
                action = Action.NORTH;
            }else if(s != null && !s.hasTail() && !s.hasAgent() && !s.hasWall()){
                action = Action.SOUTH;
            }else{
                action = Action.EAST;
            }
        } else if (movement == 1) {
            if (n != null && !n.hasTail() && !n.hasAgent() && !n.hasWall()) {
                action = Action.NORTH;
            }else if(w != null && !w.hasTail() && !w.hasAgent() && !w.hasWall()){
                action = Action.WEST;
            }else if (e != null && !e.hasTail() && !e.hasAgent() && !e.hasWall()){
                action = Action.EAST;
            }else {
                action =Action.SOUTH;
            }
        } else if (movement == 2) {
            if (e != null && !e.hasTail() && !e.hasAgent() && !e.hasWall()) {
                action = Action.EAST;
            }else  if (n != null && !n.hasTail() && !n.hasAgent() && !n.hasWall()){
                action = Action.NORTH;
            }else if (s != null && !s.hasTail() && !s.hasAgent() && !s.hasWall()){
                action = Action.SOUTH;
            }else {
                action =Action.WEST;
            }
        } else if (movement == 3) {
            if (s != null && !s.hasTail() && !s.hasAgent() && !s.hasWall()) {
                action = Action.SOUTH;
            }else if (w != null && !w.hasTail() && !w.hasAgent() && !w.hasWall()){
                action = Action.WEST;
            }else if (e != null && !e.hasTail() && !e.hasAgent() && !e.hasWall()){
                action  =Action.EAST;
            }else {
                action = Action.NORTH;
            }
        }

        return action;
    }


}
